<%
## View variables

# Globals
site_kajabi_default_subdomain = "www.daydreamsurfshop.mykajabi.com"
site_custom_domain = "daydreamsurfshop.com"
# connection_status = "in_progress"
connection_status = "connected"

# Local content
header = {
  title: "Domain",
  breadcrumbs: [{
    text: "Settings",
    url: "#"
  }]
}
button_configs_add_custom_domain = {
  style: "primary",
  icon:{ name: "add", style: "left" },
  value: "Custom Domain"
}
dns_settings_info = %(
  <p>
    Your domain settings can now be updated or modified inside Kajabi.
    However, paying for your domain and renewing it will still happen with your original domain registrar (Godaddy).
  </p>
)
default_subdomain_badge = sage_component(SageLabel, { value: "Kajabi Default", style: "info" })
subdomain_rows = [
  [
    site_kajabi_default_subdomain,
    default_subdomain_badge,
    { 
      value: render("pages/mocks/custom_domain/shared/edit_button", href: "#edit"),
      html_attributes: { class: "sage-table-cell--align-right" }
    }
  ],
  #[
    #"otherdomains...",
    #sage_component(SageLabel, {
      #value: "Connected",
      #style: "success"
      # Alternate options...
      #value: "Connection in progress...",
      #style: "warning"
      #value: "Connection failed",
      #style: "danger"
    #}),
    #{ 
      #value: render("pages/mocks/custom_domain/shared/dns_settings_button_inline"),
      #html_attributes: { class: "sage-table-cell--align-right" }
    #}
  #]
]

%>

<%= sage_component SageContainer, { size: "lg" } do %>
  <%= sage_component SagePageHeading, { title: header[:title], spacer: { bottom: :lg }} do %>
    <% content_for :sage_breadcrumbs do %>
      <%= sage_component SageBreadcrumbs, { items: header[:breadcrumbs], has_back_icon: true } %>
    <% end %>
    <% content_for :sage_page_heading_toolbar do %>
      <%= render "pages/mocks/custom_domain/shared/dns_settings_button" %>
    <% end %>
  <% end %>
  <div class="sage-row sage-row--stage">
    <div class="sage-col-8">
      <%= render "pages/mocks/custom_domain/shared/domain_status_alert", status: connection_status %>
      <div class="sage-panel-set">
        <%= render "pages/mocks/custom_domain/shared/main_domain_after_setup", 
          custom_domain: site_custom_domain,
          connection_status: connection_status,
          subdomain_rows: subdomain_rows
        %>
        <%= sage_component SagePanel, {} do %>
          <%= sage_component SagePanelHeader, { title: "Marketing Email Domain" } %>
          <i>Content TBD</i>
        <% end %>
      </div>
    </div>
    <div class="sage-col-4">
      <%= sage_component SagePanel, {} do %>
        <%= sage_component SagePanelHeader, { title: "Registrar Information" } do %>
          <%= render "pages/mocks/custom_domain/shared/info_button", href: "#help-2" %>
        <% end %>
        <%= sage_component SagePanelBlock, { type_block: true } do %>
          <%= dns_settings_info.html_safe %>
        <% end %>
      <% end %>
    </div>
  </div>
<% end %>
