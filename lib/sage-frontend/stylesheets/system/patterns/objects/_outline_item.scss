/* ==================================================
  ** outline-item
  type: object


================================================== */

$-collapse-breakpoint-key: md-min;

.sage-outline-item {
  overflow: hidden;
  margin-bottom: sage-spacing(md);
  background-color: sage-color(white);
  border: sage-border();
  border-radius: sage-border(radius);

  & & {
    margin-bottom: 0;
    border: unset;
    border-radius: unset;
  }
}

.sage-outline-item__content {
  display: grid;
  align-items: center;
  grid-template-rows: repeat(auto-fit, auto);
  padding-right: sage-spacing(sm);
  padding-left: sage-spacing(md);

  @media (min-width: sage-breakpoint($-collapse-breakpoint-key)) {
    // Using static column values to ensure alignment
    grid-template-columns: min-content 1fr min-content rem(160px) rem(92px) rem(40px);
    grid-column-gap: sage-spacing(sm);
    grid-template-areas: "handle-drag title actions-secondary actions-primary status handle-collapse";

    .sage-outline-item--type-category > & {
      padding-top: sage-spacing(sm);
      padding-bottom: sage-spacing(sm);
      border-bottom: sage-border();
    }

    .sage-outline-item--type-post > & {
      padding-top: sage-spacing(xs);
      padding-bottom: sage-spacing(xs);
      border-bottom: sage-border(light);
    }

    .sage-outline-item--type-post:last-child > & {
      border-bottom: unset;
    }
  }

  @media (max-width: sage-breakpoint($-collapse-breakpoint-key)) {
    grid-template-columns: min-content 1fr min-content min-content;
    grid-row-gap: sage-spacing(sm);
    grid-column-gap: sage-spacing(xs);
    grid-template-areas:
      "handle-drag title status handle-collapse"
      "actions-primary actions-primary actions-secondary handle-collapse";

    .sage-outline-item--type-category > & {
      padding-top: sage-spacing(lg);
      padding-bottom: sage-spacing(lg);
    }

    .sage-outline-item--type-post > & {
      padding-top: sage-spacing(sm);
      padding-bottom: sage-spacing(sm);
    }
  }

  /* stylelint-disable selector-max-compound-selectors */

  // Nested Item Identention
  // Indents `type-category` that is 1-level deep and anything that is 2-levels deep
  .sage-outline-item__children .sage-outline-item.sage-outline-item--type-category &,
  .sage-outline-item__children .sage-outline-item.sage-outline-item--type-category .sage-outline-item__children & {
    padding-left: sage-spacing(xl);
  }

  /* stylelint-enable selector-max-compound-selectors */
}

.sage-outline-item__title {
  grid-area: title;
  color: sage-color(charcoal, 400);
  @include truncate;

  .sage-outline-item--type-category > .sage-outline-item__content & {
    @extend %t-sage-body-semi;
  }

  .sage-outline-item--type-post > .sage-outline-item__content & {
    @extend %t-sage-body;
  }
}

.sage-outline-item__actions-secondary {
  display: flex;
  grid-area: actions-secondary;
  flex-direction: row;

  @media (min-width: sage-breakpoint($-collapse-breakpoint-key)) {
    visibility: hidden;

    :hover > &,
    :focus > &,
    :focus-within > & {
      visibility: visible;
    }
  }
}

.sage-outline-item__actions-primary {
  grid-area: actions-primary;
}

.sage-outline-item__status {
  display: flex;
  grid-area: status;
  justify-content: flex-end;
}

.sage-outline-item__handle-drag {
  grid-area: handle-drag;
  cursor: grab;

  &:active {
    cursor: grabbing;
  }

  // Category: Standard
  .sage-outline-item--type-category &::before {
    @include sage-icon-base(folder);
    color: sage-color(primary);
  }

  // Category: Nested
  .sage-outline-item__children .sage-outline-item--type-category &::before {
    @include sage-icon-base(arrow-corner);
    color: sage-color(primary);
  }

  // Post: Standard
  .sage-outline-item__children .sage-outline-item--type-post &::before {
    @include sage-icon-base(file);
    color: sage-color(charcoal, 200);
  }

  // Post: Video
  .sage-outline-item__children .sage-outline-item--post-icon-video &::before {
    @include sage-icon-base(video-on);
    color: sage-color(charcoal, 200);
  }

  // Post: Assessment
  .sage-outline-item__children .sage-outline-item--post-icon-assessment &::before {
    @include sage-icon-base(form);
    color: sage-color(charcoal, 200);
  }

  // Universal Hover For All
  .sage-outline-item__content:hover > & {
    &::before {
      @include sage-icon-base(handle);
      color: sage-color(charcoal, 100);
    }

    &:hover::before {
      color: sage-color(primary);
    }
  }
}

.sage-outline-item__handle-collapse {
  grid-area: handle-collapse;
}

.sage-outline-item__children {
  grid-area: content;

  .sage-outline-item--collapsed > & {
    display: none;
  }
}
