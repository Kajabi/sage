/* ==================================================
  ** _modal.scss
  type: object

================================================== */

$-modal-padding-x: sage-spacing(md);
$-modal-padding-y: sage-spacing(md);

.sage-modal {
  display: flex;
  visibility: hidden;
  align-items: flex-start;
  justify-content: center;
  position: fixed;
  z-index: sage-z-index(modal, -1);
  background-color: rgba(sage-color(charcoal, 500), 0.4);
  background-image: linear-gradient(
    rgba(sage-color(charcoal, 200), 0.3) 0%,
    rgba(sage-color(charcoal, 500), 0.3) 100%
  );
  cursor: default;

  @include position-full;

  @supports (backdrop-filter: blur(2px)) {
    backdrop-filter: blur(2px);
  }
}

.sage-modal--active {
  visibility: visible;
}

.sage-modal__container {
  // Uses both Animate and Transition properties
  // - Animate if element has been injected on the page
  // - Transition if element exists on the page and has `.sage-modal--active` added

  @mixin animation-off {
    transform: rotate3d(0, 0, 0, -20deg) translateY(6px);
    opacity: 0;
  }

  @mixin animation-on {
    transform: rotate3d(0, 0, 0, 0) translateY(0);
    opacity: 1;
  }

  @include animation-off;
  z-index: sage-z-index(modal);
  min-width: min-content;
  width: sage-container(modal);
  margin: 20vh 0 0;
  border-radius: sage-border(radius);
  background-color: sage-color(white);
  box-shadow: sage-shadow(2xl);
  transition: $sage-transition;
  transition-property: transform, opacity;
  will-change: transform, opacity;

  /* stylelint-disable max-nesting-depth */
  .sage-modal--active & {
    @keyframes animate-container {
      0% {
        @include animation-off;
      }
      100% {
        @include animation-on;
      }
    }

    @include animation-on;
    animation: animate-container 0.1s ease-in;
  }
  /* stylelint-enable max-nesting-depth */
}

.sage-modal__header {
  margin: $-modal-padding-y $-modal-padding-x;

  > :last-child {
    margin-bottom: 0;
  }
}

.sage-modal__content {
  margin: $-modal-padding-y $-modal-padding-x;

  > :last-child {
    margin-bottom: 0;
  }
}

.sage-modal__footer {
  display: flex;
  justify-content: flex-end;
  margin: $-modal-padding-y $-modal-padding-x;
}

.sage-modal__footer-aside {
  margin-right: auto;
}
